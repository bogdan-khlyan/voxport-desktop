import{k as c,_ as m,e as p,l as i,m as f,p as v,o as u,a as d,b as g,d as M,w as h,T as S,g as T}from"./index-d4c0b558.js";import{u as R}from"./user.state-d140eabd.js";const n=c({currentServer:null,currentRoom:null,servers:[]}),t=c({api:null,isAudioMute:!1});const O={class:"index"},x={key:0,class:"index__loading"},w={__name:"Meet",setup(y){const l=p(),a=i(null),r=i(!0);f(l,()=>{r.value=!0,setTimeout(()=>{a.value.innerHTML="",s()},200)}),v(()=>{s()});function s(){if(n.currentServer&&n.currentRoom){const e="jitsi.mc.devserver.host";t.api=new JitsiMeetExternalAPI(e,_()),t.api.addListener("videoConferenceJoined",()=>{setTimeout(()=>r.value=!1,200)}),t.api.addEventListener("audioMuteStatusChanged",o=>{console.log("Microphone muted:",o.muted),t.isAudioMute=o.muted})}}function _(){var e;return{roomName:(e=n.currentRoom)==null?void 0:e.id,width:"100%",height:"100vh",jwt:R.jwt,parentNode:a.value,lang:"ru",configOverwrite:{prejoinPageEnabled:!1,disableDeepLinking:!0,startWithVideoMuted:!0,enableNoisyMicDetection:!0,audioQuality:{opusMaxAverageBitrate:32e3}},interfaceConfigOverwrite:{SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,TOOLBAR_BUTTONS:["microphone","camera","desktop","fullscreen","hangup","recording"]}}}return(e,o)=>(u(),d("div",O,[g("div",{class:"index__iframe",ref_key:"iframeWrapperRef",ref:a},null,512),M(S,{name:"el-fade-in",mode:"out-in"},{default:h(()=>[r.value?(u(),d("div",x,"Loading...")):T("",!0)]),_:1})]))}},A=m(w,[["__scopeId","data-v-127c72ad"]]),E=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{A as M,E as a,t as m,n as s};
