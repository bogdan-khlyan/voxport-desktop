import{_,f as l,l as n,m,p,o as d,c as u,a as f,d as v,w as g,T as h,e as T}from"./index-d01643d7.js";import{u as R}from"./user.state-00e05dea.js";import{s as a}from"./server.state-7698cb85.js";const M={class:"index"},x={key:0,class:"index__loading"},O={__name:"Room",setup(S){const e=l(),t=n(null),o=n(!0);m(e,()=>{o.value=!0,setTimeout(()=>{t.value.innerHTML="",s()},200)}),p(()=>{s()});function s(){if(e.params.serverId&&e.params.roomId){const i="jitsi.mc.devserver.host";a.api=new JitsiMeetExternalAPI(i,c()),a.api.addListener("videoConferenceJoined",()=>{setTimeout(()=>o.value=!1,200)}),a.api.addEventListener("audioMuteStatusChanged",r=>{console.log("Microphone muted:",r.muted),a.isAudioMute=r.muted})}}function c(){return{roomName:e.params.roomId,width:"100%",height:"100vh",jwt:R.accessToken,parentNode:t.value,lang:"ru",configOverwrite:{prejoinPageEnabled:!1,disableDeepLinking:!0,startWithVideoMuted:!0,enableNoisyMicDetection:!0,audioQuality:{opusMaxAverageBitrate:32e3}},interfaceConfigOverwrite:{SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,TOOLBAR_BUTTONS:["microphone","camera","desktop","fullscreen","hangup","recording"]}}}return(i,r)=>(d(),u("div",M,[f("div",{class:"index__iframe",ref_key:"iframeWrapperRef",ref:t},null,512),v(h,{name:"el-fade-in",mode:"out-in"},{default:g(()=>[o.value?(d(),u("div",x,"Loading...")):T("",!0)]),_:1})]))}},E=_(O,[["__scopeId","data-v-0f76a055"]]);export{E as default};
